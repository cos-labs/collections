<section>
{{# if editMode}}

    <div class="form">
        <div class="form-group">
            <label for="collectionTitle">Title</label>
            {{input class="form-control" value=modelCache.title placeholder="Enter title"
                    id="collectionTitle"}}
        </div>
        <div class="form-group">
            <label for="collectionDescription">Description</label>
            {{textarea class="form-control" value=modelCache.description
                       id="collectionDescription"}}
        </div>
        <div class="form-group">
            <label for="collectionTags">Tags</label>
            {{input class="form-control" value=modelCache.tags
                    placeholder="Enter comma separated tags" id="collectionTags"}}
        </div>
        {{#if (eq collection.collectionType 'meeting')}}
            <div class="form-group">
                <label for="location">Location</label>
                {{input class="form-control" value=modelCache.location
                        placeholder="Enter location" id="location"}}
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                {{input class="form-control" value=modelCache.address
                        placeholder="Enter address" id="address"}}
            </div>

        {{else}}
            <h2>{{collection.title}}</h2>
            <div class="m-b-md">
                {{#if collection.description}}
                    {{collection.description}}
                {{else}}
                    <span class="text-muted" {{action 'showEdit'}}>Add description </span>
                {{/if}}
            </div>
            <div class="form-group">
                <label for="startDate">Start Date</label>
                {{input class="form-control" value=modelCache.startDate
                        placeholder="Enter start date" id="startDate"}}
            </div>
            <div class="form-group">
                <label for="endDate">End Date</label>
                {{input class="form-control" value=modelCache.endDate
                        placeholder="Enter end date" id="endDate"}}
            </div>
            <p>Type: {{collection.collectionType}}</p>
            <p>Created by: {{collection.createdBy.firstName}} {{collection.createdBy.lastName}}</p>
            <p>Date created: {{collection.dateCreated}} </p>
            <p>Date updated : {{collection.dateUpdated}}</p>
            {{#if (eq collection.settings.collection_type 'Meeting')}}
                <p>Location: {{collection.location}}</p>
                <p>Address: {{collection.address}}</p>
                <p>Start Date: {{collection.startDate}}</p>
                <p>End Date: {{collection.endDate}}</p>
            {{/if}}
            <pre>Settings:{{settingsString}}</pre>

            {{#if session.isAuthenticated}}
                <div class="">
                    <button class="btn btn-danger btn-space" {{action toggleProperty 'showDeleteConfirmation'}}>
                        <i class="fa fa-times"></i> Delete
                    </button>
                    <button class="btn btn-info " {{action 'showEdit'}}><i
                            class="fa fa-pencil"></i> Edit
                    </button>
                </div>
            {{/if}}
        {{/if}}
        <p>
            <a target="_blank" href="https://github.com/cos-labs/collections/blob/develop/README.md#how-to-edit-your-meetings-landing-page">
                Click here for settings documentation
            </a>
        </p>
        <div class="form-group">
            <label for="collectionSettings">Settings</label>
            {{json-editor json=modelCache.settings onChange=(action "updateCacheSettings")}}
        </div>

        <div class="text-right">
            <button class="btn btn-default btn-space" {{action 'cancelEdit'}}>Cancel</button>
            <button class="btn btn-success" {{action 'saveEdit'}}>Save</button>
        </div>
    </div>

{{else}}
    <h2>{{collection.title}}</h2>
    <div class="m-b-md">
        {{#if collection.description}}
            {{collection.description}}
        {{else}}
            <span class="text-muted" {{action 'showEdit'}}>Add description </span>
        {{/if}}
    </div>
    <div class="m-b-md">
        {{#each formattedTags as |tag|}}
            <span class="coll-item-tag">{{tag}}</span>
        {{/each}}
    </div>
    <p>
        Type: {{collection.collectionType}}<br>
        Created by: {{collection.createdBy.firstName}} {{collection.createdBy.lastName}}<br>
        Date created: {{collection.dateCreated}}<br>
        Date updated : {{collection.dateUpdated}}<br>
        {{#if (eq collection.settings.collection_type 'Meeting')}}
            Location: {{collection.location}}<br>
            Address: {{collection.address}}<br>
            Start Date: {{collection.startDate}}<br>
            End Date: {{collection.endDate}}<br>
        {{/if}}
    </p>


    <pre style="height:{{jsonBodyHeight}}">Settings:{{settingsString}}</pre>
    <button class="btn btn-default jsonBtn" {{action 'toggleJsonView'}}>{{jsonBtnText}}</button>

    {{#if session.isAuthenticated}}
        <div>
            <button class="btn btn-danger btn-space" {{action toggleProperty 'showDeleteConfirmation'}}>
                <i class="fa fa-times"></i> Delete
            </button>
            <button class="btn btn-info " {{action 'showEdit'}}><i
                    class="fa fa-pencil"></i> Edit
            </button>
        </div>
    {{/if}}
{{/if}}


{{#if showDeleteConfirmation}}
    <div class="modal fade in" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" aria-label="Close" {{action toggleProperty
                                                                                    'showDeleteConfirmation'}}>
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Delete collection "{{collection.title}}"?</h4>
                </div>
                <div class="modal-body">
                    <p>This will remove all groups and items inside collections. Original projects
                        are not deleted.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" {{action toggleProperty 'showDeleteConfirmation'}}>Close</button>
                    <button type="button" class="btn btn-danger" {{action 'deleteCollection'}}>Delete</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <div class="modal-backdrop fade in"></div>
{{/if}}
</section>
